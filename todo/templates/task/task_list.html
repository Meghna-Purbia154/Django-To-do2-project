{% extends 'base.html' %}
{% block content %}

<style>
    body {
        background: linear-gradient(135deg, #f9f5ff, #fef7f2, #f3fbff);
        font-family: "Poppins", sans-serif;
    }

    /* HEADER */
    .dashboard-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 28px;
    }

    .dashboard-header h2 {
        color: #6a5aa3;
        font-weight: 700;
        letter-spacing: 0.3px;
    }

    /* ADD TASK BUTTON */
    .btn-add-task {
        background: #e8ddff;
        padding: 10px 20px;
        border-radius: 14px;
        color: #4f3d84;
        font-weight: 600;
        text-decoration: none;
        border: none;
        transition: 0.25s ease;
        box-shadow: 0 4px 10px rgba(0,0,0,0.08);
    }

    .btn-add-task:hover {
        background: #d8c9ff;
        transform: translateY(-3px);
        box-shadow: 0 10px 18px rgba(0,0,0,0.12);
    }

    /* TASK CARD */
    .task-card {
        background: rgba(255, 255, 255, 0.85);
        border-radius: 20px;
        padding: 20px;
        margin-bottom: 18px;
        border-left: 6px solid #c7b6ff; /* Default */
        border: 1px solid #efe8ff;
        box-shadow: 0 6px 16px rgba(0,0,0,0.07);
        transition: 0.3s ease;
    }

    .task-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 12px 22px rgba(0,0,0,0.12);
    }

    /* TITLE */
    .task-title a {
        text-decoration: none;
        font-size: 20px;
        color: #5c4d92;
        font-weight: 600;
    }

    /* META */
    .task-meta {
        color: #7a7a7a;
        font-size: 13px;
    }

    /* CATEGORY */
    .category-pill {
        padding: 6px 12px;
        border-radius: 50px;
        color: #fff;
        font-size: 12px;
        font-weight: 600;
        margin-right: 10px;
        box-shadow: 0 3px 8px rgba(0,0,0,0.10);
    }

    /* STATUS BADGES */
    .status-badge {
        font-size: 12px;
        padding: 5px 10px;
        border-radius: 10px;
        font-weight: 600;
        margin-right: 8px;
    }
    .status-completed { background: #d4ffe1; color: #257a44; }
    .status-overdue { background: #ffe1e1; color: #b32424; }
    .status-pending { background: #fff6d6; color: #a37a12; }

    /* BUTTONS */
    .task-btn {
        padding: 6px 12px;
        border-radius: 10px;
        font-size: 13px;
        font-weight: 500;
        text-decoration: none;
        border: 1px solid #c6b8ff;
        color: #5f4fa7;
        transition: 0.25s ease;
    }

    .task-btn:hover {
        background: #e4d9ff;
        box-shadow: 0px 5px 12px rgba(0,0,0,0.15);
    }

    /* SIDEBAR */
    .side-card {
        background: rgba(255,255,255,0.9);
        padding: 20px;
        border-radius: 20px;
        border: 1px solid #f0e6ff;
        box-shadow: 0 6px 15px rgba(0,0,0,0.08);
    }

    .side-card h5 {
        color: #6a5aa3;
        font-weight: 700;
    }

    .side-card p {
        color: #514d6b;
        margin-bottom: 6px;
        font-size: 14px;
    }

    /* SIDEBAR CATEGORY LINKS */
    .cat-link {
        color: #4e3e88;
        font-weight: 500;
        text-decoration: none;
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .cat-dot {
        width: 10px;
        height: 10px;
        border-radius: 50%;
        background: #cbb8ff;
    }

    .cat-link:hover {
        color: #3d2f70;
        text-decoration: underline;
    }

    /* EMPTY STATE */
    .empty-box {
        padding: 25px;
        text-align: center;
        border-radius: 18px;
        background: rgba(255,255,255,0.75);
        border: 1px solid #e9dcff;
        color: #6a5aa3;
        font-weight: 600;
        box-shadow: 0 8px 18px rgba(0,0,0,0.08);
    }

</style>


<div class="dashboard-header">
    <h2>Your Tasks üå∏</h2>
    <a href="{% url 'task-add' %}" class="btn-add-task">+ Add Task</a>
</div>


<div class="row">
    <div class="col-md-8">

        {% for task in tasks %}
        <div class="task-card" >
            <div class="d-flex justify-content-between align-items-center">
                
                <div>
                    <h5 class="task-title">
                        <a href="{% url 'task-detail' task.pk %}">{{ task.title }}</a>
                    </h5>

                    <small class="task-meta">
                        Due: {{ task.due_date }}
                    </small>
                    <br>

                    {% if task.get_status_display == 'Completed' %}
                        <span class="status-badge status-completed">‚úî Completed</span>
                    {% elif task.get_status_display == 'Overdue' %}
                        <span class="status-badge status-overdue">‚ö† Overdue</span>
                    {% else %}
                        <span class="status-badge status-pending">‚è≥ Pending</span>
                    {% endif %}
                </div>

                <div>
                    {% if task.category %}
                    <span class="category-pill">
                        {{ task.category.name }}
                    </span>
                    {% endif %}

                    <a href="{% url 'task-edit' task.pk %}" class="task-btn">Edit</a>
                    <a href="{% url 'task-delete' task.pk %}" class="task-btn">Delete</a>
                </div>

            </div>
        </div>
        {% empty %}
        <div class="empty-box">No tasks yet ‚ú® Start by creating one!</div>
        {% endfor %}

    </div>


    <!-- SIDEBAR -->
    <div class="col-md-4">
        <div class="side-card">
            <h5>Stats</h5>
            <p>Total: {{ total }}</p>
            <p>Completed: {{ completed }}</p>
            <p>Overdue: {{ overdue }}</p>

            <h6 class="mt-3">Categories</h6>
            <ul class="list-unstyled">
                {% for c in categories %}
                <li class="mb-2">
                    <a href="{% url 'category-tasks' c.pk %}" class="cat-link">
                        <span class="cat-dot" ></span>
                        {{ c.name }}
                    </a>
                </li>
                {% empty %}
                <li>No categories.</li>
                {% endfor %}
            </ul>
        </div>
    </div>

</div>

{% endblock %}
